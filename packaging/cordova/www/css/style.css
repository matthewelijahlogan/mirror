/* ===========================
   Mirror Oracle — Full, Robust Edition
   (Enhanced from your provided CSS)
   - Preserves original layout & classes
   - Adds UI styles for quiz form + sliders
   - Extra visual layers: stars, particles, double-smoke
   - Improved typography, spacing, and accessibility
   =========================== */

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cinzel:wght@400;600&display=swap');

:root{
  --bg-dark: #03030a;
  --glass-edge: rgba(255,255,255,0.12);
  --glass-mid: rgba(220,220,255,0.04);
  --glow-a: rgba(110,80,255,0.18);
  --accent1: #6b4cff;
  --accent2: #4ef9ff;
  --text: #eef0ff;
  --muted: rgba(238,240,255,0.36);
  --card-bg: rgba(12,12,18,0.48);
  --glass-strong: rgba(255,255,255,0.06);
  --shadow-strong: rgba(0,0,0,0.65);
  --radius-main: 28px;
  --max-width: 1060px;
  --focus-ring: rgba(78,249,255,0.18);
  --small-gap: 12px;
}

/* =================
   Landing page center
   ================= */
.centered{
  position:relative;
  z-index:10;
  width:min(92vw,960px);
  max-width:var(--max-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:24px;
  padding:48px 32px;
  border-radius:var(--radius-main);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)) padding-box,
    linear-gradient(145deg, rgba(255,255,255,0.06), rgba(100,80,255,0.04)) border-box;
  border: 8px solid rgba(255,255,255,0.03);
  box-shadow:
    0 40px 120px rgba(0,0,0,0.82),
    inset 0 8px 50px rgba(255,255,255,0.02),
    0 0 180px rgba(100,80,255,0.06);
  backdrop-filter: blur(8px) saturate(120%);
}

.centered h1{
  font-family:'Great Vibes',cursive;
  font-size:clamp(2.5rem,6vw,4.5rem);
  color:rgba(255,255,255,0.98);
  margin:0;
  text-shadow: 0 0 25px rgba(110,80,255,0.4);
}

.centered p{
  font-size:clamp(1rem,2vw,1.2rem);
  color:var(--muted);
  margin:0;
  line-height:1.5;
}

/* ===========================
   Page background & centering
   =========================== */
body.mirror-bg{
  margin:0;
  min-height:100vh;
  width:100vw;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Cinzel",serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 15% 10%, rgba(80,40,160,0.08) 0%, transparent 16%),
    radial-gradient(900px 420px at 85% 80%, rgba(78,200,255,0.03) 0%, transparent 20%),
    radial-gradient(circle at 30% 20%, #0b0b15 0%, #020103 60%, #000 100%);
  overflow:hidden;
}

/* subtle starfield */
body.mirror-bg::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:
    radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,0.04) 0, transparent 50%),
    radial-gradient(1px 1px at 20% 70%, rgba(255,255,255,0.03) 0, transparent 50%),
    radial-gradient(1px 1px at 40% 30%, rgba(255,255,255,0.02) 0, transparent 50%),
    radial-gradient(1px 1px at 70% 18%, rgba(255,255,255,0.03) 0, transparent 50%);
  opacity:0.7;
  pointer-events:none;
  z-index:0;
  mix-blend-mode:screen;
  transform: translateZ(0);
}

/* =================
   Mirror container
   ================= */
.fortune-box{
  position:relative;
  width:min(92vw,960px);
  height:min(86vh,1100px);
  max-width:var(--max-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  border-radius:var(--radius-main);
  padding:32px;
  box-sizing:border-box;
  z-index:10;

  background:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)) padding-box,
    linear-gradient(145deg, rgba(255,255,255,0.06), rgba(100,80,255,0.04)) border-box;
  border: 8px solid rgba(255,255,255,0.03);
  box-shadow:
    0 40px 120px rgba(0,0,0,0.82),
    inset 0 8px 50px rgba(255,255,255,0.02),
    0 0 180px rgba(100,80,255,0.06);
  backdrop-filter: blur(8px) saturate(120%);
}

/* additional inner frame ring */
.fortune-box::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:calc(var(--radius-main) - 6px);
  pointer-events:none;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.005), rgba(255,255,255,0.01));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 6px 18px rgba(0,0,0,0.35);
  mix-blend-mode:overlay;
  z-index:12;
}

/* =================
   Fortune page styles
   ================= */
.mirror-header{
  position:absolute;
  top:26px;
  left:50%;
  transform:translateX(-50%);
  font-family:'Great Vibes',cursive;
  font-size:clamp(2rem,6vw,4.25rem);
  color:rgba(255,255,255,0.98);
  text-align:center;
  z-index:40;
  opacity:0;
  text-shadow: 0 0 25px rgba(110,80,255,0.4);
  animation: fadeIn 1.1s ease 0.8s forwards;
}

.fortune-mirror{
  position:relative;
  width:min(92vw,960px);
  height:min(86vh,1100px);
  max-width:var(--max-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  border-radius:var(--radius-main);
  padding:32px;
  box-sizing:border-box;
  z-index:10;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)) padding-box,
    linear-gradient(145deg, rgba(255,255,255,0.06), rgba(100,80,255,0.04)) border-box;
  border: 8px solid rgba(255,255,255,0.03);
  box-shadow:
    0 40px 120px rgba(0,0,0,0.82),
    inset 0 8px 50px rgba(255,255,255,0.02),
    0 0 180px rgba(100,80,255,0.06);
  backdrop-filter: blur(8px) saturate(120%);
}

.fortune-mirror::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:calc(var(--radius-main) - 6px);
  pointer-events:none;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.005), rgba(255,255,255,0.01));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 6px 18px rgba(0,0,0,0.35);
  mix-blend-mode:overlay;
  z-index:12;
}

@keyframes fadeIn {
  from { opacity:0; transform:translateX(-50%) translateY(8px); }
  to { opacity:1; transform:translateX(-50%) translateY(0); }
}

/* =================
   Titles
   ================= */
#mirrorTitle,
#mirrorTitle2{
  position:fixed;
  left:50%;
  text-align:center;
  pointer-events:none;
  z-index:45;
  font-family:'Great Vibes',cursive;
  color:rgba(255,255,255,0.98);
  letter-spacing:0.6px;
  line-height:0.86;
  transform:translateX(-50%);
  text-rendering:optimizeLegibility;
}

/* primary — large title with glow */
#mirrorTitle{
  top:max(30px, 8vh);
  font-size:clamp(2.2rem,7vw,4.8rem);
  opacity:0;
  transform:translate(-50%, -8px) scale(0.95);
  transition:opacity 1.2s ease, transform 1.2s ease;
  mix-blend-mode:screen;
  text-shadow:
    0 0 20px rgba(110,80,255,0.5),
    0 0 40px rgba(78,249,255,0.3),
    0 2px 8px rgba(0,0,0,0.8);
}

/* secondary — subtitle with accent glow */
#mirrorTitle2{
  top:max(105px, 15vh);
  font-size:clamp(1.1rem,3vw,1.95rem);
  opacity:0;
  transition:opacity 1.8s ease 0.4s, transform 1.3s ease 0.4s;
  transform:translateX(-50%) translateY(6px);
  text-shadow:
    0 0 15px rgba(255,255,255,0.7),
    0 0 25px rgba(110,80,255,0.35),
    0 0 45px rgba(78,249,255,0.15);
  font-weight:600;
  color:rgba(220,220,255,0.95);
}

/* reveal helpers (toggle .show in JS) */
#mirrorTitle.show { opacity:1; transform:translateX(-50%) translateY(0) scale(1); }
#mirrorTitle2.show { opacity:1; transform:translateX(-50%) translateY(0) scale(1); }

/* subtle pulsing spotlight under titles */
.title-spot{
  position:absolute;
  top:110px;
  left:50%;
  transform:translateX(-50%);
  width:60%;
  height:110px;
  background: radial-gradient(closest-side, rgba(120,80,255,0.06), transparent 60%);
  filter: blur(22px);
  z-index:9;
  pointer-events:none;
}

/* =================
   Mirror panel + sheen
   ================= */
.fortune-box .mirror-panel,
.fortune-mirror .mirror-panel{
  position:relative;
  z-index:20;
  width:calc(100% - 64px);
  height:calc(100% - 156px);
  border-radius:22px;
  overflow-y:auto;
  overflow-x:hidden;
  display:flex;
  align-items:flex-start;
  justify-content:flex-start;
  flex-direction:column;
  background:
    linear-gradient(180deg, rgba(220,220,255,0.045), rgba(180,180,255,0.02)),
    radial-gradient(800px 300px at 75% 20%, rgba(255,255,255,0.04), transparent 20%);
  border:1px solid var(--glass-edge);
  backdrop-filter: blur(6px) saturate(120%);
  box-shadow: inset 0 16px 50px rgba(255,255,255,0.03), inset 0 -28px 70px rgba(0,0,0,0.38);
  padding:20px 0;
}

/* large moving sheen */
.fortune-box .mirror-panel::after,
.fortune-mirror .mirror-panel::after{
  content:"";
  position:absolute;
  inset:-40% -30%;
  background: linear-gradient(120deg,
    rgba(255,255,255,0.04) 0%,
    rgba(255,255,255,0.09) 25%,
    rgba(255,255,255,0.02) 40%,
    rgba(255,255,255,0.01) 60%,
    transparent 80%);
  transform: rotate(-18deg) translateX(-60%);
  filter: blur(22px) saturate(120%);
  animation: sheenMove 14s linear infinite;
  z-index:3;
  mix-blend-mode:screen;
  pointer-events:none;
}

/* small soft moving sheen (adds depth) */
.fortune-box .mirror-panel::before,
.fortune-mirror .mirror-panel::before{
  content:"";
  position:absolute;
  inset:-10% -6%;
  background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  filter: blur(10px);
  transform: translateY(-8%);
  z-index:2;
  mix-blend-mode:screen;
  pointer-events:none;
}

/* sheen animation */
@keyframes sheenMove {
  0% { transform: rotate(-18deg) translateX(-60%); opacity:0.8; }
  50% { transform: rotate(-18deg) translateX(60%); opacity:0.95; }
  100% { transform: rotate(-18deg) translateX(-60%); opacity:0.8; }
}

/* =================
   Smoke layers (two) + particles
   ================= */
.smoke {
  position:absolute;
  z-index:4;
  width:min(60vw,620px);
  height:min(60vh,620px);
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  border-radius:50%;
  pointer-events:none;
  mix-blend-mode:screen;
}

/* primary smoke */
.smoke.primary{
  background: radial-gradient(circle at 50% 40%,
    rgba(255,255,255,0.12) 0%,
    rgba(255,255,255,0.06) 10%,
    rgba(255,255,255,0.02) 22%,
    transparent 40%);
  filter: blur(36px) saturate(120%);
  opacity:0.62;
  animation: smokeDriftLarge 18s ease-in-out infinite;
}

/* subtle secondary smoke for depth */
.smoke.secondary{
  background: radial-gradient(circle at 40% 60%,
    rgba(120,80,255,0.06) 0%,
    rgba(78,249,255,0.02) 16%,
    transparent 36%);
  filter: blur(46px) saturate(120%);
  opacity:0.4;
  animation: smokeDriftSmall 22s ease-in-out infinite;
  z-index:5;
}

@keyframes smokeDriftLarge {
  0% { transform: translate(-50%,-50%) scale(0.96); opacity:0.48; }
  35% { transform: translate(-48%,-53%) scale(1.06); opacity:0.92; }
  70% { transform: translate(-52%,-47%) scale(1.02); opacity:0.68; }
  100% { transform: translate(-50%,-50%) scale(0.98); opacity:0.5; }
}
@keyframes smokeDriftSmall {
  0% { transform: translate(-50%,-48%) scale(0.92); opacity:0.35; }
  50% { transform: translate(-46%,-54%) scale(1.08); opacity:0.6; }
  100% { transform: translate(-50%,-48%) scale(0.94); opacity:0.38; }
}

/* tiny floating particles */
.particles{
  position:absolute;
  inset:0;
  z-index:6;
  pointer-events:none;
  background-image:
    radial-gradient(1px 1px at 12% 30%, rgba(255,255,255,0.04) 0, transparent 40%),
    radial-gradient(1px 1px at 68% 20%, rgba(255,255,255,0.03) 0, transparent 40%),
    radial-gradient(1px 1px at 38% 75%, rgba(255,255,255,0.02) 0, transparent 40%);
  opacity:0.6;
  mix-blend-mode:screen;
}

/* =================
   Mirror content container
   ================= */
.mirror-content{
  position:relative;
  z-index:7;
  width:86%;
  max-width:920px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  text-align:center;
  gap:18px;
  padding:22px 20px;
  box-sizing:border-box;
}

/* =================
   Fortune text
   ================= */
.fortune-text{
  font-family:"Cinzel",serif;
  font-size:clamp(1rem,1.5vw + 0.6rem,1.35rem);
  color:var(--text);
  line-height:1.55;
  max-width:100%;
  white-space:pre-wrap;
  word-break:break-word;
  overflow-wrap:anywhere;
  padding:14px 18px;
  border-radius:12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border: 1px solid rgba(255,255,255,0.02);
  box-shadow: 0 12px 36px rgba(0,0,0,0.48), inset 0 2px 8px rgba(255,255,255,0.02);
  z-index:7;
  transform-origin:center;
  opacity:0;
  transition: opacity 1.6s ease 0.2s, transform 0.8s ease;
  max-height: calc(100% - 160px);
  overflow-y:auto;
  -webkit-overflow-scrolling: touch;
}

/* mirrored faint reflection line */
.fortune-text::after{
  content: attr(data-reflection);
  display:block;
  margin-top:18px;
  color: rgba(255,255,255,0.10);
  transform: scaleY(-1) translateY(8px);
  filter: blur(6px) saturate(60%);
  opacity:0.8;
  font-size:0.9em;
  line-height:1.4;
  pointer-events:none;
}

/* visible helper */
.fortune-text.visible{ opacity:1; transform: translateY(0); }

/* styled scrollbar inside fortune box */
.fortune-text::-webkit-scrollbar{ width:10px; }
.fortune-text::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(120,80,255,0.28), rgba(78,249,255,0.22));
  border-radius:999px;
  border:2px solid rgba(0,0,0,0.0);
}
.fortune-text::-webkit-scrollbar-track{ background: transparent; }

/* small helper text */
.small{ font-size:0.85rem; color:var(--muted); line-height:1.2; }

/* =================
   Buttons
   ================= */
.button{
  --pad-x:28px;
  padding:12px var(--pad-x);
  border-radius:999px;
  border:none;
  cursor:pointer;
  color:white;
  font-weight:600;
  background: linear-gradient(90deg, var(--accent1), var(--accent2));
  box-shadow: 0 12px 34px rgba(78,113,255,0.16), 0 4px 12px rgba(0,0,0,0.35);
  transition: transform 180ms ease, box-shadow 180ms ease;
  z-index:9;
}
.button:hover{ transform: translateY(-4px) scale(1.02); box-shadow: 0 20px 48px rgba(78,113,255,0.24); }
.button:active{ transform: translateY(-1px) scale(0.995); }
.button:focus{ outline: 3px solid var(--focus-ring); outline-offset: 3px; }

/* =================
   Quiz form & question styles
   ================= */
/* container for questions (in quiz.html) */
#quiz-questions{ width:100%; display:flex; flex-direction:column; gap:14px; align-items:stretch; }

/* each question wrapper */
.question{
  display:flex;
  flex-direction:column;
  align-items:stretch;
  gap:8px;
  background: rgba(255,255,255,0.01);
  border: 1px solid rgba(255,255,255,0.02);
  padding:12px 14px;
  border-radius:10px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.01);
}

/* question text */
.qtext{
  font-family:"Cinzel",serif;
  font-size:clamp(0.95rem,1.2vw,1.08rem);
  color:var(--text);
  text-align:left;
  margin-bottom:4px;
}

/* range slider base style */
input[type="range"]{
  appearance: none;
  -webkit-appearance: none;
  width:100%;
  height:32px;
  background: transparent;
  margin:6px 0 0;
}

/* track */
input[type="range"]::-webkit-slider-runnable-track{
  height:8px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}

/* thumb */
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:20px; height:20px; border-radius:999px;
  background: linear-gradient(180deg, var(--accent2), var(--accent1));
  border: 2px solid rgba(255,255,255,0.14);
  box-shadow: 0 6px 14px rgba(78,113,255,0.22);
  margin-top:-6px;
}

/* firefox fallback */
input[type="range"]::-moz-range-track{
  height:8px; border-radius:999px; background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
}
input[type="range"]::-moz-range-thumb{
  width:20px; height:20px; border-radius:999px;
  background: linear-gradient(180deg, var(--accent2), var(--accent1));
  border: 2px solid rgba(255,255,255,0.14);
}

/* radio group styling (if used) */
.question .choices{ display:flex; gap:10px; flex-wrap:wrap; }
.question label{ cursor:pointer; color:var(--text); font-size:0.98rem; }
.question input[type="radio"]{ accent-color: var(--accent1); }

/* user info block */
.user-info{ width:100%; display:flex; flex-direction:column; gap:8px; margin-top:12px; }
.user-info label{ font-size:0.95rem; color:var(--muted); text-align:left; }
.user-info input[type="text"], .user-info input[type="date"]{
  width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.03);
  background: rgba(0,0,0,0.18); color:var(--text); font-size:0.98rem;
}
.user-info input:focus{ outline:3px solid var(--focus-ring); outline-offset:2px; }

/* form submit area */
form#quiz-form{ 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  gap:14px;
  width:100%;
}

/* ensure button is always clickable and visible */
form#quiz-form button[type="submit"] {
  margin-top: 16px;
  position: relative;
  z-index: 20;
  min-width: 160px;
}

/* Quiz-mode adjustments: keep titles visible as fixed overlay, add top spacing for content */
body.quiz-mode #mirrorTitle,
body.quiz-mode #mirrorTitle2 {
  display: block !important;
}
body.quiz-mode .mirror-content{
  padding-top: 18px !important;
  align-items:stretch;
}

/* Make questions more touch-friendly */
.question{ padding:16px 16px; }
input[type="range"]{ height:44px; }
input[type="range"]::-webkit-slider-thumb{ width:28px; height:28px; margin-top:-10px; }
@media (max-width:720px){
  .question{ padding:14px; }
  .button{ width:100%; min-width:0; }
}

/* hidden/visible helpers used by existing html */
.hidden{ display:none !important; }
.show{ display:block !important; }

/* =================
   Accessibility helpers
   ================= */
a.button, button.button{ text-decoration:none; display:inline-block; text-align:center; }

/* =================
   Responsive adjustments
   ================= */
@media (max-width: 920px){
  .fortune-box{ padding:22px; height:92vh; }
  .mirror-content{ width:92%; gap:12px; padding:18px; }
  .fortune-text{ font-size:clamp(0.98rem,2.8vw,1.18rem); }
  #mirrorTitle{ top:14px; font-size:clamp(1.6rem,10vw,3rem); }
  #mirrorTitle2{ top:56px; font-size:clamp(1rem,4.2vw,1.6rem); }
}

@media (max-width:720px){
  #mirrorTitle, #mirrorTitle2{ top:12px; left:50%; transform:translateX(-50%); }
  #mirrorTitle{ font-size:clamp(1.4rem,8.5vw,2.6rem); top:18px; }
  #mirrorTitle2{ font-size:clamp(1rem,6.5vw,1.6rem); top:56px; }
  .fortune-box{ width:94vw; height:94vh; padding:18px; border-radius:18px; }
  .fortune-text{ font-size:clamp(0.95rem,3.6vw,1.06rem); max-height:60vh; padding:12px; }
  .fortune-text::after{ display:none; }
  .smoke.primary{ display:block; width:90vw; height:70vh; filter: blur(30px); opacity:0.5; }
  .smoke.secondary{ display:none; }
  .mirror-content{ justify-content:flex-start; gap:12px; padding-top:78px; }
  .title-spot{ display:none; }
}

/* Quiz progress & nav tweaks */
.quiz-progress{ text-align:center; color:var(--muted); margin-top:6px; }
.question .choices{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
.question button.button{ padding:8px 12px; font-size:0.95rem; }
@media (max-width:720px){
  .quiz-progress{ font-size:0.92rem; }
  .question .choices button{ flex:1 1 48%; }
}

/* =================
   Small polish/finishing touches
   ================= */
/* subtle border glow on hover for fortune */
.fortune-box:hover{ box-shadow: 0 48px 160px rgba(0,0,0,0.86), inset 0 8px 50px rgba(255,255,255,0.02); }

/* gentle focus ring for interactive elements inside panel */
.mirror-panel :focus{ outline: 3px solid var(--focus-ring); outline-offset:3px; border-radius:8px; }

/* ensure images and svg scale well */
.fortune-box img, .fortune-box svg{ max-width:100%; height:auto; display:block; }

/* small keyboard hint area (used in quiz view potentially) */
.kbhint{ font-size:0.85rem; color:var(--muted); margin-top:8px; }

/* Loading overlay shown while submitting quiz */
#mm-loading-overlay{ background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.66)); }
.mm-loader{ display:flex; flex-direction:column; align-items:center; gap:12px; color:var(--text); }
.mm-text{ font-family: 'Cinzel', serif; font-size:1.05rem; opacity:0.95; }
.spinner{ width:56px; height:56px; border-radius:50%; border:6px solid rgba(255,255,255,0.06); border-top-color:var(--accent2); animation:spin 1s linear infinite; box-shadow:0 8px 30px rgba(78,113,255,0.12); }
@keyframes spin{ 0%{ transform:rotate(0deg);} 100%{ transform:rotate(360deg);} }

/* end of file */
